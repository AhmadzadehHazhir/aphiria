#!/usr/bin/env php
<?php

declare(strict_types=1);

use Aphiria\Console\Commands\CommandRegistry;
use Aphiria\Console\Kernel;

// Check if we're in the vendor bin
if (file_exists($vendorBinAutoload = __DIR__ . '/../../autoload.php')) {
    require_once $vendorBinAutoload;
} else {
    // Assume we're in the local bin directory
    require_once __DIR__ . '/../vendor/autoload.php';
}

$commands = new CommandRegistry();
$kernel = new Kernel($commands);
global $argv;
exit($kernel->handle($argv));